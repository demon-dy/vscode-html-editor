# 新属性编辑器设计 - 布局模式优先的UX

## 设计理念

基于"先选择布局模式，再配置对应属性"的思路，重新设计属性编辑器的交互流程。让用户在明确的上下文中进行操作，避免属性冲突，降低学习成本。

## 总体布局

```
┌─────────────────────────────────────────┐
│                 HTML元素                 │
├─────────────────────────────────────────┤
│                布局模式                  │
│    [无布局] [绝对] [响应式] [网格]       │
├─────────────────────────────────────────┤
│                                         │
│            动态属性面板区域               │
│         (根据选择的布局模式变化)          │
│                                         │
├─────────────────────────────────────────┤
│                样式属性                  │
│        [外观] [文字] [效果]             │
└─────────────────────────────────────────┘
```

## 布局模式切换区域

### 模式选择器设计
```
┌─────────────────────────────────────────┐
│  布局模式 Layout Mode                   │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐         │
│  │ 📄  │ │ 📌  │ │ ↔️  │ │ ⊞   │         │
│  │无布局│ │绝对 │ │响应式│ │网格 │         │
│  │     │ │     │ │     │ │     │         │
│  └─────┘ └─────┘ └─●───┘ └─────┘         │
│                                         │
│  ※ 当前选择：响应式布局 (Flexbox)         │
└─────────────────────────────────────────┘
```

### 模式说明
- **无布局**：默认文档流，适用于简单文本和基础布局
- **绝对布局**：精确定位，适用于覆盖层和特殊位置需求
- **响应式布局**：Flexbox，适用于现代响应式设计
- **网格布局**：Grid，适用于复杂的二维布局

## 动态属性面板

### 1. 无布局模式
```
┌─────────────────────────────────────────┐
│  📄 无布局 (Document Flow)               │
├─────────────────────────────────────────┤
│                                         │
│  显示模式                                │
│  ○ 块级元素 (block)                      │
│  ○ 内联元素 (inline)                     │
│  ● 内联块  (inline-block)                │
│                                         │
│  内外边距                                │
│  ┌─────────────────────────────────────┐ │
│  │ Margin   X: [8 ] Y: [10] [📐] [🔗] │ │
│  │ Padding  X: [12] Y: [16] [📐] [🔗] │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  文本对齐                                │
│  [≡左对齐] [≣居中] [≡右对齐] [≣两端对齐]   │
│                                         │
└─────────────────────────────────────────┘
```

### 2. 绝对布局模式
```
┌─────────────────────────────────────────┐
│  📌 绝对布局 (Absolute Position)         │
├─────────────────────────────────────────┤
│                                         │
│  定位类型                                │
│  ○ 相对定位 (relative)                   │
│  ● 绝对定位 (absolute)                   │
│  ○ 固定定位 (fixed)                      │
│  ○ 粘性定位 (sticky)                     │
│                                         │
│  ┌─────────────────────────────────────┐ │
│  │         位置设置                     │ │
│  │                                     │ │
│  │          Top [50] px                │ │
│  │                                     │ │
│  │  Left    ┌─────────┐    Right       │ │
│  │  [20] px │    ⊞    │ [auto] px     │ │
│  │          │         │               │ │
│  │          └─────────┘               │ │
│  │                                     │ │
│  │        Bottom [auto] px             │ │
│  │                                     │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  层级顺序                                │
│  Z-index: [999] [↑] [↓]                 │
│                                         │
│  变换                                    │
│  平移 X:[0] Y:[0]   旋转 [0°]           │
│  缩放 X:[1] Y:[1]   倾斜 [0°]           │
│                                         │
└─────────────────────────────────────────┘
```

### 3. 响应式布局模式 (重点)
```
┌─────────────────────────────────────────┐
│  ↔️ 响应式布局 (Flexbox)                │
├─────────────────────────────────────────┤
│                                         │
│  容器设置                                │
│  ┌─────────────────────────────────────┐ │
│  │ 方向 Direction                      │ │
│  │ ● 水平 (row)     ○ 水平反向 (row-r) │ │
│  │ ○ 垂直 (column)  ○ 垂直反向 (col-r) │ │
│  │                                     │ │
│  │ 换行 Wrap                           │ │
│  │ ● 不换行 (nowrap)  ○ 换行 (wrap)    │ │
│  │ ○ 反向换行 (wrap-reverse)           │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  对齐设置                                │
│  ┌─────────────────────────────────────┐ │
│  │ 主轴对齐 (justify-content)          │ │
│  │ [≡] [⊞] [≣] [↔] [≋] [≈]             │ │
│  │ 起始 居中 末尾 间距 环绕 均匀          │ │
│  │                                     │ │
│  │ 交叉轴对齐 (align-items)            │ │
│  │ [⬆] [⊞] [⬇] [↕] [〰]                │ │
│  │ 起始 居中 末尾 拉伸 基线               │ │
│  │                                     │ │
│  │ 内容对齐 (align-content) - 多行时    │ │
│  │ [≡] [⊞] [≣] [↔] [≋] [↕]             │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  间距设置                                │
│  ┌─────────────────────────────────────┐ │
│  │ 子元素间距 Gap                       │ │
│  │ X轴: [16] px  Y轴: [16] px [🔗]     │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  内外边距                                │
│  ┌─────────────────────────────────────┐ │
│  │ Margin   X: [8 ] Y: [8 ] [📐] [🔗] │ │
│  │ Padding  X: [16] Y: [16] [📐] [🔗] │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  子元素控制 (当前选中元素在flex容器中)     │
│  ┌─────────────────────────────────────┐ │
│  │ 自身对齐 (align-self)               │ │
│  │ ○ 自动 ● 起始 ○ 居中 ○ 末尾 ○ 拉伸   │ │
│  │                                     │ │
│  │ 弹性设置 (flex)                     │ │
│  │ 增长: [0] 收缩: [1] 基准: [auto]     │ │
│  │ 快捷: [固定] [填充] [自适应]         │ │
│  │                                     │ │
│  │ 顺序 (order): [0] [⬅] [➡]          │ │
│  └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

#### 内外边距展开详细面板 (点击📐图标)
```
┌─────────────────────────────────────────┐
│  📐 详细内外边距设置                     │
├─────────────────────────────────────────┤
│                                         │
│  外边距 Margin                          │
│  ┌─────────────────────────────────────┐ │
│  │           Top [8 ]                  │ │
│  │                                     │ │
│  │   Left    ┌─────────┐    Right      │ │
│  │   [8 ]    │ Content │    [8 ]       │ │
│  │           │         │               │ │
│  │           └─────────┘               │ │
│  │                                     │ │
│  │         Bottom [8 ]                 │ │
│  │                                     │ │
│  │ [🔗] 统一设置  [↻] 重置              │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  内边距 Padding                         │
│  ┌─────────────────────────────────────┐ │
│  │           Top [16]                  │ │
│  │                                     │ │
│  │   Left    ┌─────────┐    Right      │ │
│  │   [16]    │ Content │    [16]       │ │
│  │           │         │               │ │
│  │           └─────────┘               │ │
│  │                                     │ │
│  │         Bottom [16]                 │ │
│  │                                     │ │
│  │ [🔗] 统一设置  [↻] 重置              │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  [✓ 应用] [✗ 取消]                      │
│                                         │
└─────────────────────────────────────────┘
```

### 4. 网格布局模式
```
┌─────────────────────────────────────────┐
│  ⊞ 网格布局 (CSS Grid)                  │
├─────────────────────────────────────────┤
│                                         │
│  网格定义                                │
│  ┌─────────────────────────────────────┐ │
│  │ 列模板 grid-template-columns        │ │
│  │ [1fr] [+] [200px] [+] [1fr] [⊞]     │ │
│  │                                     │ │
│  │ 行模板 grid-template-rows           │ │
│  │ [auto] [+] [1fr] [+] [auto] [⊞]     │ │
│  │                                     │ │
│  │ 快捷模板:                           │ │
│  │ [2列等宽] [3列等宽] [左固定右自适应] │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  间距设置                                │
│  ┌─────────────────────────────────────┐ │
│  │ 网格间距 Gap                        │ │
│  │ X轴: [16] px  Y轴: [16] px [🔗]     │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  内外边距                                │
│  ┌─────────────────────────────────────┐ │
│  │ Margin   X: [8 ] Y: [8 ] [📐] [🔗] │ │
│  │ Padding  X: [16] Y: [16] [📐] [🔗] │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  对齐设置                                │
│  ┌─────────────────────────────────────┐ │
│  │ 网格对齐 (justify-items)            │ │
│  │ [≡] [⊞] [≣] [↕]                     │ │
│  │ 起始 居中 末尾 拉伸                  │ │
│  │                                     │ │
│  │ 内容对齐 (align-items)              │ │
│  │ [⬆] [⊞] [⬇] [↕]                     │ │
│  │ 起始 居中 末尾 拉伸                  │ │
│  └─────────────────────────────────────┘ │
│                                         │
│  子元素控制 (当前选中元素在grid容器中)     │
│  ┌─────────────────────────────────────┐ │
│  │ 网格位置                            │ │
│  │ 列: 从 [1] 到 [3]  行: 从 [1] 到 [2] │ │
│  │                                     │ │
│  │ 区域命名: [header  ] [设置]         │ │
│  │                                     │ │
│  │ 自身对齐                            │ │
│  │ justify-self: [≡] [⊞] [≣] [↕]       │ │
│  │ align-self:   [⬆] [⊞] [⬇] [↕]       │ │
│  └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```


## 底部样式属性区域

```
┌─────────────────────────────────────────┐
│  样式属性 Style Properties              │
├─────────────────────────────────────────┤
│                                         │
│  [🎨 外观] [📝 文字] [✨ 效果] [📐 尺寸]  │
│                                         │
│  ┌─────────────────────────────────────┐ │
│  │ 根据选择的标签页显示对应的属性控制    │ │
│  │                                     │ │
│  │ 外观: 背景色、边框、圆角等           │ │
│  │ 文字: 字体、大小、颜色、行高等       │ │
│  │ 效果: 阴影、透明度、滤镜等           │ │
│  │ 尺寸: 宽度、高度、最大最小值等       │ │
│  │                                     │ │
│  └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

## 操作流程

### 场景1：设计师想要居中一个元素
```
1. 选择元素
2. 在布局模式中选择 "响应式布局"
3. 在对齐设置中选择 主轴居中 + 交叉轴居中
4. 完成 - 系统自动设置 display:flex, justify-content:center, align-items:center
```

### 场景2：前端开发者需要精确定位
```
1. 选择元素
2. 在布局模式中选择 "绝对布局"
3. 设置 position: absolute
4. 在位置设置中输入具体的 top, left 值
5. 完成 - 获得精确的定位控制
```

### 场景3：创建复杂的网格布局
```
1. 选择容器元素
2. 在布局模式中选择 "网格布局"
3. 定义列模板：[200px] [1fr] [200px]
4. 定义行模板：[auto] [1fr] [auto]
5. 选择子元素，设置网格位置：header区域占据第一行
6. 完成 - 获得复杂的网格布局
```

## 智能提示系统

### 上下文提示
```
┌─────────────────────────────────────────┐
│  💡 智能建议                            │
├─────────────────────────────────────────┤
│                                         │
│  当前元素包含多个子元素，建议使用：       │
│  • 响应式布局：适合线性排列             │
│  • 网格布局：适合二维排列               │
│                                         │
│  [应用响应式] [应用网格] [忽略建议]      │
│                                         │
└─────────────────────────────────────────┘
```

### 冲突检测
```
┌─────────────────────────────────────────┐
│  ⚠️ 属性冲突警告                        │
├─────────────────────────────────────────┤
│                                         │
│  当前元素同时设置了：                    │
│  • position: absolute                   │
│  • display: flex                        │
│                                         │
│  建议：选择一种主要的布局模式            │
│                                         │
│  [保留绝对布局] [保留响应式] [手动处理]  │
│                                         │
└─────────────────────────────────────────┘
```

## 代码预览面板

```
┌─────────────────────────────────────────┐
│  📋 生成的CSS代码                       │
├─────────────────────────────────────────┤
│                                         │
│  .selected-element {                    │
│    display: flex;                       │
│    justify-content: center;             │
│    align-items: center;                 │
│    gap: 16px;                           │
│  }                                      │
│                                         │
│  [📋 复制] [👁 预览] [↻ 重置]            │
│                                         │
└─────────────────────────────────────────┘
```

## 响应式断点管理

```
┌─────────────────────────────────────────┐
│  📱 响应式断点                          │
├─────────────────────────────────────────┤
│                                         │
│  [📱手机] [📱平板] [💻桌面] [🖥大屏]      │
│                                         │
│  当前编辑: 桌面版 (≥1024px)              │
│                                         │
│  💡 在不同断点下，布局模式可以不同         │
│                                         │
└─────────────────────────────────────────┘
```

## 设计优势

### 1. 认知负荷降低
- 每次只需要关注一种布局模式的属性
- 避免了属性冲突和困惑

### 2. 学习路径清晰
- 新手可以按步骤学习不同的布局模式
- 专家可以快速切换到熟悉的模式

### 3. 代码质量保证
- 每种模式生成的代码都是最佳实践
- 避免了无效或冗余的CSS

### 4. 扩展性强
- 未来可以轻松添加新的布局模式
- 每个模式都是独立的，不会相互干扰

### 5. 跨角色友好
- 设计师：通过图形化界面理解布局概念
- 前端：获得精确的技术控制
- 新手：渐进式学习布局知识

这个设计真正解决了"用Figma的简单性，做HTML的专业性"的核心矛盾。

## 内外边距设计详解

### 简化显示 (默认状态)
参考Figma的设计，默认只显示X轴和Y轴的设置：
```
┌─────────────────────────────────────┐
│ Margin   X: [8 ] Y: [8 ] [📐] [🔗] │
│ Padding  X: [16] Y: [16] [📐] [🔗] │
└─────────────────────────────────────┘
```

### 图标说明
- **📐** : 点击展开详细的四个方向设置
- **🔗** : 链接图标，点击可统一设置X/Y轴的值

### 展开详细设置
点击📐图标后展开完整的四方向设置面板，提供传统的上右下左控制方式，适合需要精确控制的场景。

### 设计优势
1. **默认简单**：大多数情况下只需要设置X/Y轴即可
2. **进阶详细**：需要时可以展开四个方向的精确控制
3. **操作直观**：链接按钮可以快速统一设置
4. **符合习惯**：既照顾Figma用户习惯，也保留传统Web开发方式

这种设计在保持简洁的同时，为不同层次的用户提供了合适的控制粒度。