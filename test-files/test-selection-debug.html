<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€‰æ‹©äº‹ä»¶è°ƒè¯•æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }

        .test-element {
            padding: 20px;
            margin: 10px 0;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .test-element:hover {
            border-color: #4CAF50;
            transform: translateY(-2px);
        }

        [wve-selected] {
            border-color: #2196F3 !important;
            background-color: rgba(33, 150, 243, 0.1);
        }

        .debug-info {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 300px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            font-size: 12px;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
        }

        .debug-info h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
        }

        .log-entry {
            margin: 5px 0;
            padding: 3px;
            background: #f8f8f8;
            border-radius: 3px;
        }

        .log-error {
            background: #ffe6e6;
            color: #d63031;
        }

        .log-info {
            background: #e6f3ff;
            color: #0984e3;
        }

        .log-debug {
            background: #f0f0f0;
            color: #636e72;
        }
    </style>
</head>
<body data-wve-code-start="0" data-wve-code-end="100">
    <h1>é€‰æ‹©äº‹ä»¶è°ƒè¯•æµ‹è¯•é¡µé¢</h1>

    <p>ç‚¹å‡»ä¸‹é¢çš„å…ƒç´ æ¥æµ‹è¯•é€‰æ‹©äº‹ä»¶æ˜¯å¦æ­£å¸¸è§¦å‘ï¼Œå¹¶æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯ã€‚</p>

    <div class="debug-info">
        <h3>è°ƒè¯•æ—¥å¿—</h3>
        <div style="margin-bottom: 10px;">
            <label for="logLevel">æ—¥å¿—çº§åˆ«:</label>
            <select id="logLevel" onchange="setLogLevel(this.value)">
                <option value="0">Debug (æ˜¾ç¤ºæ‰€æœ‰)</option>
                <option value="1" selected>Info (é»˜è®¤)</option>
                <option value="2">Warn (åªæ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯)</option>
                <option value="3">Error (åªæ˜¾ç¤ºé”™è¯¯)</option>
            </select>
        </div>
        <div id="debug-logs"></div>
        <button onclick="clearLogs()">æ¸…é™¤æ—¥å¿—</button>
    </div>

    <div class="test-element" data-wve-code-start="10" data-wve-code-end="20">
        <h2>æµ‹è¯•å…ƒç´  1</h2>
        <p>è¿™æ˜¯ç¬¬ä¸€ä¸ªæµ‹è¯•å…ƒç´ ï¼Œç‚¹å‡»é€‰æ‹©å®ƒã€‚</p>
    </div>

    <div class="test-element" data-wve-code-start="25" data-wve-code-end="35">
        <h2>æµ‹è¯•å…ƒç´  2</h2>
        <p>è¿™æ˜¯ç¬¬äºŒä¸ªæµ‹è¯•å…ƒç´ ï¼Œå¯ä»¥æµ‹è¯•å¤šé€‰ã€‚</p>
        <button data-wve-code-start="30" data-wve-code-end="32">å†…åµŒæŒ‰é’®</button>
    </div>

    <div class="test-element" data-wve-code-start="40" data-wve-code-end="60">
        <h2>æµ‹è¯•å…ƒç´  3</h2>
        <p>è¿™ä¸ªå…ƒç´ åŒ…å«æ›´å¤æ‚çš„ç»“æ„ï¼š</p>
        <ul data-wve-code-start="45" data-wve-code-end="55">
            <li data-wve-code-start="46" data-wve-code-end="48">åˆ—è¡¨é¡¹ 1</li>
            <li data-wve-code-start="49" data-wve-code-end="51">åˆ—è¡¨é¡¹ 2</li>
            <li data-wve-code-start="52" data-wve-code-end="54">åˆ—è¡¨é¡¹ 3</li>
        </ul>
    </div>

    <script>
        let debugLogs = document.getElementById('debug-logs');
        let logCount = 0;

        // æ•è·æ‰€æœ‰æ§åˆ¶å°æ—¥å¿—
        const originalConsoleLog = console.log;
        const originalConsoleInfo = console.info;
        const originalConsoleError = console.error;
        const originalConsoleDebug = console.debug;

        function addLogEntry(level, message) {
            logCount++;
            const entry = document.createElement('div');
            entry.className = `log-entry log-${level}`;
            entry.innerHTML = `<small>[${logCount}] ${new Date().toLocaleTimeString()}</small><br>${message}`;
            debugLogs.appendChild(entry);
            debugLogs.scrollTop = debugLogs.scrollHeight;

            // é™åˆ¶æ—¥å¿—æ•°é‡
            if (debugLogs.children.length > 50) {
                debugLogs.removeChild(debugLogs.firstChild);
            }
        }

        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            addLogEntry('info', args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)).join(' '));
        };

        console.info = function(...args) {
            originalConsoleInfo.apply(console, args);
            addLogEntry('info', args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)).join(' '));
        };

        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            addLogEntry('error', args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)).join(' '));
        };

        console.debug = function(...args) {
            originalConsoleDebug.apply(console, args);
            addLogEntry('debug', args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)).join(' '));
        };

        function clearLogs() {
            debugLogs.innerHTML = '';
            logCount = 0;
            console.info('è°ƒè¯•æ—¥å¿—å·²æ¸…é™¤');
        }

        function setLogLevel(level) {
            // è®¾ç½®å…¨å±€æ—¥å¿—çº§åˆ«
            window.WVE = window.WVE || {};
            window.WVE.config = window.WVE.config || {};
            window.WVE.config.logLevel = parseInt(level);

            console.info(`æ—¥å¿—çº§åˆ«å·²è®¾ç½®ä¸º: ${level} (${['Debug', 'Info', 'Warn', 'Error'][level]})`);

            // å¦‚æœ WVE å·²ç»åˆå§‹åŒ–ï¼Œæ›´æ–°æ‰€æœ‰å·²å­˜åœ¨çš„ Logger
            if (window.WVE.Logger && window.WVE.Logger.updateAllLevels) {
                window.WVE.Logger.updateAllLevels(parseInt(level));
            }
        }

        // ç›‘å¬é€‰æ‹©å˜æ›´äº‹ä»¶
        document.addEventListener('wveSelectionChange', function(event) {
            console.info('ğŸ“¢ æ¥æ”¶åˆ°é€‰æ‹©å˜æ›´äº‹ä»¶:', {
                detail: event.detail,
                selectedCount: event.detail?.selected?.length || 0,
                elements: event.detail?.selected?.map(el => el.tagName + '.' + (el.className || '(no-class)')) || []
            });
        });

        // é¡µé¢åŠ è½½å®Œæˆåçš„æç¤º
        window.addEventListener('load', function() {
            console.info('ğŸš€ é€‰æ‹©äº‹ä»¶è°ƒè¯•é¡µé¢å·²åŠ è½½');
            console.info('ğŸ’¡ ç°åœ¨å¯ä»¥ç‚¹å‡»æµ‹è¯•å…ƒç´ æ¥æŸ¥çœ‹é€‰æ‹©äº‹ä»¶æ˜¯å¦æ­£å¸¸è§¦å‘');
        });

        // ç›‘å¬æ‰€æœ‰è‡ªå®šä¹‰äº‹ä»¶
        document.addEventListener('wveModeChange', function(event) {
            console.info('ğŸ“¢ æ¥æ”¶åˆ°æ¨¡å¼å˜æ›´äº‹ä»¶:', event.detail);
        });

        document.addEventListener('wveStyleChange', function(event) {
            console.info('ğŸ“¢ æ¥æ”¶åˆ°æ ·å¼å˜æ›´äº‹ä»¶:', event.detail);
        });

        document.addEventListener('wveLayoutModeChange', function(event) {
            console.info('ğŸ“¢ æ¥æ”¶åˆ°å¸ƒå±€æ¨¡å¼å˜æ›´äº‹ä»¶:', event.detail);
        });
    </script>
</body>
</html>